function colorinit(){function a(a){var t=[a.find(".top_left_val"),a.find(".top_right_val"),a.find(".bottom_right_val"),a.find(".bottom_left_val")],o=t[0].css("background"),l=t[0].data("val");t[0].css("background",t[1].css("background")),t[0].data("val",t[1].data("val")),t[1].css("background",t[2].css("background")),t[1].data("val",t[2].data("val")),t[2].css("background",t[3].css("background")),t[2].data("val",t[3].data("val")),t[3].css("background",o),t[3].data("val",l)}function t(a){for(var t=[0,"red","green","blue","purple"],o="",l=0;l<a.length;l++)o+='<div class="color_cont"> <div class="top_left_val" style="background:url(/2016/static/lacuna/img/puzzle/magic/'+t[a[l][0]]+'.png);" data-val="'+a[l][0]+'"></div> <div class="top_right_val" style="background:url(/2016/static/lacuna/img/puzzle/magic/'+t[a[l][1]]+'.png);" data-val="'+a[l][1]+'"></div> <div class="bottom_left_val" style="background:url(/2016/static/lacuna/img/puzzle/magic/'+t[a[l][2]]+'.png);" data-val="'+a[l][2]+'"></div> <div class="bottom_right_val" style="background:url(/2016/static/lacuna/img/puzzle/magic/'+t[a[l][3]]+'.png);" data-val="'+a[l][3]+'"></div> </div>';$("#dice_wrapper").html(o),$(".color_cont").draggable(colorOptions)}function o(){$(".drop_dice>.color_cont").length==$(".color_cont").length&&l()}function l(){var a,t,o=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],l=!0;$(".drop_dice").each(function(){var a=$(this).find(".color_cont"),t=2*$(this).data("x"),l=2*$(this).data("y");o[t][l]=a.find(".top_left_val").data("val"),o[t][l+1]=a.find(".top_right_val").data("val"),o[t+1][l]=a.find(".bottom_left_val").data("val"),o[t+1][l+1]=a.find(".bottom_right_val").data("val")});for(var c=0;c<o.length/2;c++)for(var n=0;n<o[c].length/2;n++)a=2*c,t=2*n,0==o[a][t]||(0==a||0==o[a-1][t]||o[a][t]==o[a-1][t]&&o[a][t+1]==o[a-1][t+1])&&(0==t||0==o[a][t-1]||o[a][t]==o[a][t-1]&&o[a+1][t]==o[a+1][t-1])||(l=!1);l&&submit_ans(o,11)}var c=[[2,4,1,1],[3,4,3,1],[2,3,2,2],[1,4,3,3],[1,1,3,1],[1,4,2,2],[4,4,1,1],[1,3,1,3],[2,3,3,1],[3,3,4,2],[3,2,3,3],[1,3,4,4]];t(c),$(".drop_dice").droppable({drop:function(a,t){var l=$(this);return l.find(".color_cont").length>=1?void t.draggable.draggable("option","revert",!0):(t.draggable.appendTo(l).css({top:"0px",left:"0px"}),void o())}}),$("#dice_wrapper").droppable({drop:function(a,t){var o=$(this);t.draggable.appendTo(o).css({top:"0px",left:"0px"})}}),$("#dice_wrapper").on("click",".color_cont",function(){a($(this))}),$("#place_dice").on("click",".color_cont",function(){a($(this)),o()})}var colorOptions={revert:"invalid",stop:function(){$(this).draggable("option","revert","invalid")}};